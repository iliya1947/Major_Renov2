import"./styles-CQ5-UQad.js";const l="https://iyrlmknautvmjkmbxxjc.supabase.co",g="sb_publishable_7aWqWFgu8pWSxYKYRBgRjg_yclXUz0A",r=window.supabase.createClient(l,g),I="Admin33",E="Admin555";let c=null;function i(e){document.getElementById("login-section").classList.add("hidden"),document.getElementById("admin-section").classList.add("hidden"),document.getElementById(e).classList.remove("hidden")}function v(e,t){return e===I&&t===E?(sessionStorage.setItem("adminLoggedIn","true"),i("admin-section"),u(),!0):!1}function y(){sessionStorage.removeItem("adminLoggedIn"),i("login-section"),document.getElementById("login-form").reset()}async function u(){try{const{data:e,error:t}=await r.from("promotion").select("*").maybeSingle();if(t)throw t;e&&(c=e.id,document.getElementById("text-he").value=e.text_he,document.getElementById("text-ru").value=e.text_ru,document.getElementById("text-en").value=e.text_en,document.getElementById("promotion-active").checked=e.is_active)}catch(e){console.error("Error loading promotion:",e),a("Error loading promotion data","error")}}async function m(e,t,n,o){try{const s={text_he:e,text_ru:t,text_en:n,is_active:o,updated_at:new Date().toISOString()},{error:d}=await r.from("promotion").update(s).eq("id",c);if(d)throw d;a("✓ Promotion updated successfully!","success")}catch(s){console.error("Error saving promotion:",s),a("✗ Error saving promotion","error")}}function a(e,t){const n=document.getElementById("save-message");n.textContent=e,n.className=t==="success"?"success-message":"error-message",n.classList.remove("hidden"),setTimeout(()=>{n.classList.add("hidden")},3e3)}function h(e){const t=document.getElementById("login-error");t.textContent=e,t.classList.remove("hidden"),setTimeout(()=>{t.classList.add("hidden")},3e3)}document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("theme")||"day-theme";document.body.className=e,sessionStorage.getItem("adminLoggedIn")==="true"?(i("admin-section"),u()):i("login-section"),document.getElementById("login-form").addEventListener("submit",t=>{t.preventDefault();const n=document.getElementById("username").value,o=document.getElementById("password").value;v(n,o)||h("✗ Invalid username or password")}),document.getElementById("logout-btn").addEventListener("click",y),document.getElementById("promotion-form").addEventListener("submit",async t=>{t.preventDefault();const n=document.getElementById("text-he").value,o=document.getElementById("text-ru").value,s=document.getElementById("text-en").value,d=document.getElementById("promotion-active").checked;await m(n,o,s,d)}),document.getElementById("promotion-active").addEventListener("change",async t=>{if(c){const n=document.getElementById("text-he").value,o=document.getElementById("text-ru").value,s=document.getElementById("text-en").value,d=t.target.checked;await m(n,o,s,d)}})});
